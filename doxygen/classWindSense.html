<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>NEWMAST: WindSense Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">NEWMAST
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">WindSense Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="WindSense" --><div class="dynheader">
Collaboration diagram for WindSense:</div>
<div class="dyncontent">
<div class="center"><img src="classWindSense__coll__graph.png" border="0" usemap="#WindSense_coll__map" alt="Collaboration graph"/></div>
<map name="WindSense_coll__map" id="WindSense_coll__map">
<area shape="rect" id="node2" href="classHardwareSerial.html" title="HardwareSerial" alt="" coords="5,166,117,194"/><area shape="rect" id="node4" href="classStream.html" title="Stream" alt="" coords="29,86,93,114"/><area shape="rect" id="node6" href="classPrint.html" title="Print" alt="" coords="37,6,85,34"/><area shape="rect" id="node8" href="structWindSense_1_1GPGLL.html" title="GPS Data Struct Contains the GPS data from the airmar." alt="" coords="141,166,283,194"/><area shape="rect" id="node10" href="structWindSense_1_1GPVTG.html" title="WindSense::GPVTG" alt="" coords="307,166,449,194"/><area shape="rect" id="node12" href="structWindSense_1_1WIMWV.html" title="WindSense::WIMWV" alt="" coords="475,166,620,194"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structWindSense_1_1GPGLL.html">GPGLL</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">GPS Data Struct Contains the GPS data from the airmar.  <a href="structWindSense_1_1GPGLL.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structWindSense_1_1GPVTG.html">GPVTG</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structWindSense_1_1WIMWV.html">WIMWV</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#af664d8ea5db527206e64301455277929">WindSense</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a513ba1ac1fc5369499315e37d63f053e"></a><!-- doxytag: member="WindSense::WindSense" ref="a513ba1ac1fc5369499315e37d63f053e" args="(HardwareSerial *inSerial)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>WindSense</b> (<a class="el" href="classHardwareSerial.html">HardwareSerial</a> *inSerial)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#a857d644e8150797a2ffc626e8e39e4a2">grabChar</a> (char input)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a character to the partial sentence string.  <a href="#a857d644e8150797a2ffc626e8e39e4a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#abc6881989101175595efce5f59587ac9">validateNMEA</a> (char *input)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the checksum matches at the end.  <a href="#abc6881989101175595efce5f59587ac9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae588f066429fc69c55347b460ca8de77"></a><!-- doxytag: member="WindSense::validateInternalNMEA" ref="ae588f066429fc69c55347b460ca8de77" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>validateInternalNMEA</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#a1f5f29fd81c464d38de6703f48f1ae6f">splitNMEA</a> (char *input)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an array of strings (char arrays) containing parsed values.  <a href="#a1f5f29fd81c464d38de6703f48f1ae6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac8702e5aace56e4c8818088551d309dd"></a><!-- doxytag: member="WindSense::splitInternalNMEA" ref="ac8702e5aace56e4c8818088551d309dd" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>splitInternalNMEA</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abdf66a848c8a169d145443073727c2f6"></a><!-- doxytag: member="WindSense::resetInternalNMEA" ref="abdf66a848c8a169d145443073727c2f6" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>resetInternalNMEA</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#a3bda1198330c913cadd51eb5bf9652a8">parseInternalNMEA</a> (char *input)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains all of the parsing functions <a class="el" href="ParseToStruct_8cpp_source.html">parseToStruct.cpp</a>.  <a href="#a3bda1198330c913cadd51eb5bf9652a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#a1d7be6f9e3ed9964a1661df7bf44df9d">updateGPS_GPGLL</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the GPS Data Struct by parsing.  <a href="#a1d7be6f9e3ed9964a1661df7bf44df9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#aef8efeb056b1f79b42fed46c00ed991a">updateWIND_WIMWV</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the Wind Data Struct by Parsing.  <a href="#aef8efeb056b1f79b42fed46c00ed991a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#aa7fb078bc8798b983103688d83c69f1d">updateSPEED_GPVTG</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the Speet Data Struct by Parsing.  <a href="#aa7fb078bc8798b983103688d83c69f1d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#a41186075f501fbc3b9c691e215c4ec47">debug</a> (<a class="el" href="classHardwareSerial.html">HardwareSerial</a> &amp;debugPortIn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stuff related purely to out wind sensor set-up.  <a href="#a41186075f501fbc3b9c691e215c4ec47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#aa68e74aa80256710f68238196f4d5fd0">debugDump</a> (<a class="el" href="classHardwareSerial.html">HardwareSerial</a> &amp;debugPortIn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps a lot of info to the computers serial line.  <a href="#aa68e74aa80256710f68238196f4d5fd0"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a061e7abee51944d5a264dda2a889c3be"></a><!-- doxytag: member="WindSense::partCount" ref="a061e7abee51944d5a264dda2a889c3be" args="" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be">partCount</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">index for partSentence <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abe7bbd7724c280892c4bcff6df5e456d"></a><!-- doxytag: member="WindSense::partSentence" ref="abe7bbd7724c280892c4bcff6df5e456d" args="[100]" -->
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d">partSentence</a> [100]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer for incoming NMEA for grabChar function <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd05c14e6eae93432dbc0bc66737563d"></a><!-- doxytag: member="WindSense::stringArray" ref="afd05c14e6eae93432dbc0bc66737563d" args="[40][15]" -->
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d">stringArray</a> [40][15]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of strings for splitNMEA. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad6ffa36b5ca5732a6ac9b0247dd193be"></a><!-- doxytag: member="WindSense::stringArrayIdx" ref="ad6ffa36b5ca5732a6ac9b0247dd193be" args="" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWindSense.html#ad6ffa36b5ca5732a6ac9b0247dd193be">stringArrayIdx</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">index for the array of strings <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24f70cd5284c30228676f62c5107d5dd"></a><!-- doxytag: member="WindSense::GPS_GPGLL" ref="a24f70cd5284c30228676f62c5107d5dd" args="" -->
<a class="el" href="structWindSense_1_1GPGLL.html">GPGLL</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GPS_GPGLL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4e41042ca6323048f5f00d30d2f15d3"></a><!-- doxytag: member="WindSense::WIND_WIMWV" ref="aa4e41042ca6323048f5f00d30d2f15d3" args="" -->
<a class="el" href="structWindSense_1_1WIMWV.html">WIMWV</a>&#160;</td><td class="memItemRight" valign="bottom"><b>WIND_WIMWV</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a545ca2abb5640fbe6dd5647b49211b78"></a><!-- doxytag: member="WindSense::SPEED_GPVTG" ref="a545ca2abb5640fbe6dd5647b49211b78" args="" -->
<a class="el" href="structWindSense_1_1GPVTG.html">GPVTG</a>&#160;</td><td class="memItemRight" valign="bottom"><b>SPEED_GPVTG</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd874ebeaa66979b31c8fc8cb6b363f8"></a><!-- doxytag: member="WindSense::senSerial" ref="acd874ebeaa66979b31c8fc8cb6b363f8" args="" -->
<a class="el" href="classHardwareSerial.html">HardwareSerial</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>senSerial</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="WindSense_8h_source.html#l00013">13</a> of file <a class="el" href="WindSense_8h_source.html">WindSense.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af664d8ea5db527206e64301455277929"></a><!-- doxytag: member="WindSense::WindSense" ref="af664d8ea5db527206e64301455277929" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WindSense::WindSense </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>&lt; index for partSentence</p>
<p>&lt; index for the array of strings </p>

<p>Definition at line <a class="el" href="WindSense_8cpp_source.html#l00003">3</a> of file <a class="el" href="WindSense_8cpp_source.html">WindSense.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                     {
    <a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a> = 0;        
    <a class="code" href="classWindSense.html#ad6ffa36b5ca5732a6ac9b0247dd193be" title="index for the array of strings">stringArrayIdx</a> = 0;   
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a41186075f501fbc3b9c691e215c4ec47"></a><!-- doxytag: member="WindSense::debug" ref="a41186075f501fbc3b9c691e215c4ec47" args="(HardwareSerial &amp;debugPortIn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::debug </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHardwareSerial.html">HardwareSerial</a> &amp;&#160;</td>
          <td class="paramname"><em>debugPortIn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stuff related purely to out wind sensor set-up. </p>
<p>Things like the initialisation after instantiation of the object, and some debugging function stuff. Waits for NMEA, tells you everything</p>
<p>This function takes a serial port to use for debugging the functions and listens for an NMEA sentence. Then it runs through them with the validation, splitting and parsing functions. It spits out output the entire way.</p>
<p>For this function to work properly, it must be called within a loop. If this were the only line to be executed in the main loop, it would work as expected.</p>
<p>The Serial port given to this function must have already had the baud rate set </p>

<p>Definition at line <a class="el" href="AIRMARSpecific_8cpp_source.html#l00022">22</a> of file <a class="el" href="AIRMARSpecific_8cpp_source.html">AIRMARSpecific.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
    <a class="code" href="classHardwareSerial.html">HardwareSerial</a>* debugPort = &amp;debugPortIn;

    <span class="keywordflow">while</span>(debugPort-&gt;available()) {
        <span class="keywordflow">if</span> (<a class="code" href="classWindSense.html#a857d644e8150797a2ffc626e8e39e4a2" title="Adds a character to the partial sentence string.">grabChar</a>(debugPort-&gt;read())) {
            <a class="code" href="classWindSense.html#aa68e74aa80256710f68238196f4d5fd0" title="Dumps a lot of info to the computers serial line.">debugDump</a>(*debugPort);
        }
    }

    <span class="keywordflow">return</span> 1;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classWindSense_a41186075f501fbc3b9c691e215c4ec47_cgraph.png" border="0" usemap="#classWindSense_a41186075f501fbc3b9c691e215c4ec47_cgraph" alt=""/></div>
<map name="classWindSense_a41186075f501fbc3b9c691e215c4ec47_cgraph" id="classWindSense_a41186075f501fbc3b9c691e215c4ec47_cgraph">
<area shape="rect" id="node3" href="classWindSense.html#a857d644e8150797a2ffc626e8e39e4a2" title="Adds a character to the partial sentence string." alt="" coords="198,5,351,33"/><area shape="rect" id="node5" href="classWindSense.html#aa68e74aa80256710f68238196f4d5fd0" title="Dumps a lot of info to the computers serial line." alt="" coords="190,57,359,85"/><area shape="rect" id="node7" href="classWindSense.html#a3bda1198330c913cadd51eb5bf9652a8" title="Contains all of the parsing functions parseToStruct.cpp." alt="" coords="408,57,621,85"/><area shape="rect" id="node9" href="classWindSense.html#a1d7be6f9e3ed9964a1661df7bf44df9d" title="Update the GPS Data Struct by parsing." alt="" coords="679,5,897,33"/><area shape="rect" id="node11" href="classWindSense.html#aef8efeb056b1f79b42fed46c00ed991a" title="Update the Wind Data Struct by Parsing." alt="" coords="673,57,903,85"/><area shape="rect" id="node13" href="classWindSense.html#aa7fb078bc8798b983103688d83c69f1d" title="Update the Speet Data Struct by Parsing." alt="" coords="670,109,906,137"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa68e74aa80256710f68238196f4d5fd0"></a><!-- doxytag: member="WindSense::debugDump" ref="aa68e74aa80256710f68238196f4d5fd0" args="(HardwareSerial &amp;debugPortIn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::debugDump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHardwareSerial.html">HardwareSerial</a> &amp;&#160;</td>
          <td class="paramname"><em>debugPortIn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dumps a lot of info to the computers serial line. </p>
<p>Would have been incorporated directly into the debug function, but it just takes up too much space. In the event the flash image for the arduino becomes too large be sure to get rid of this function.</p>
<p>Resets the Internal NMEA Index counters </p>

<p>Definition at line <a class="el" href="AIRMARSpecific_8cpp_source.html#l00043">43</a> of file <a class="el" href="AIRMARSpecific_8cpp_source.html">AIRMARSpecific.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
    <a class="code" href="classHardwareSerial.html">HardwareSerial</a>* debugPort = &amp;debugPortIn;

    <span class="comment">// Information about what is in the partSentence Buffer</span>
    debugPort-&gt;println(<span class="stringliteral">&quot;NMEA Detected&quot;</span>);
    debugPort-&gt;println(<a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>);
    debugPort-&gt;print(<span class="stringliteral">&quot;Valid?...&quot;</span>);
    debugPort-&gt;println(validateInternalNMEA());

    <span class="comment">// Separating the NMEA into sub-strings</span>
    splitInternalNMEA();
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classWindSense.html#ad6ffa36b5ca5732a6ac9b0247dd193be" title="index for the array of strings">stringArrayIdx</a>; i++) {
        debugPort-&gt;print(<span class="stringliteral">&quot;String &quot;</span>);
        debugPort-&gt;print(i);
        debugPort-&gt;print(<span class="stringliteral">&quot; &quot;</span>);
        debugPort-&gt;println(<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[i]);
    }

    <a class="code" href="classWindSense.html#a3bda1198330c913cadd51eb5bf9652a8" title="Contains all of the parsing functions parseToStruct.cpp.">parseInternalNMEA</a>(<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[0]);

    <span class="comment">// Dump the degrees and minutes to see if it worked</span>
    debugPort-&gt;print(<span class="stringliteral">&quot;The minutes lattitude are &quot;</span>);
    debugPort-&gt;println(GPS_GPGLL.minuteLatitude);
    debugPort-&gt;print(<span class="stringliteral">&quot;The degrees lattitude are &quot;</span>);
    debugPort-&gt;println(GPS_GPGLL.degreeLatitude);
    debugPort-&gt;print(<span class="stringliteral">&quot;Lattitude Direction is &quot;</span>);
    debugPort-&gt;println(GPS_GPGLL.latitudeDirection);

    debugPort-&gt;print(<span class="stringliteral">&quot;The minutes longitude are &quot;</span>);
    debugPort-&gt;println(GPS_GPGLL.minuteLongitude);
    debugPort-&gt;print(<span class="stringliteral">&quot;The degrees longitude are &quot;</span>);
    debugPort-&gt;println(GPS_GPGLL.degreeLongitude);
    debugPort-&gt;print(<span class="stringliteral">&quot;longitude Direction is &quot;</span>);
    debugPort-&gt;println(GPS_GPGLL.longitudeDirection);

    debugPort-&gt;print(<span class="stringliteral">&quot;Wind Speed is &quot;</span>);
    debugPort-&gt;println(WIND_WIMWV.windSpeed);
    debugPort-&gt;print(<span class="stringliteral">&quot;Units for the speed &quot;</span>);
    debugPort-&gt;println(WIND_WIMWV.windSpeedUnits);
    debugPort-&gt;print(<span class="stringliteral">&quot;The angle is &quot;</span>);
    debugPort-&gt;println(WIND_WIMWV.windAngle);
    debugPort-&gt;print(<span class="stringliteral">&quot;The reference for that angle &quot;</span>);
    debugPort-&gt;println(WIND_WIMWV.reference);

    debugPort-&gt;print(<span class="stringliteral">&quot;Speed over ground &quot;</span>);
    debugPort-&gt;println(SPEED_GPVTG.speedoverGround);
    debugPort-&gt;print(<span class="stringliteral">&quot;Units &quot;</span>);
    debugPort-&gt;println(SPEED_GPVTG.speedUnits);
    debugPort-&gt;print(<span class="stringliteral">&quot;Course over ground &quot;</span>);
    debugPort-&gt;println(SPEED_GPVTG.courseoverGround);
    debugPort-&gt;print(<span class="stringliteral">&quot;Units &quot;</span>);
    debugPort-&gt;println(SPEED_GPVTG.unitCourseMeasurement);

    resetInternalNMEA();
    <span class="keywordflow">return</span> 1;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classWindSense_aa68e74aa80256710f68238196f4d5fd0_cgraph.png" border="0" usemap="#classWindSense_aa68e74aa80256710f68238196f4d5fd0_cgraph" alt=""/></div>
<map name="classWindSense_aa68e74aa80256710f68238196f4d5fd0_cgraph" id="classWindSense_aa68e74aa80256710f68238196f4d5fd0_cgraph">
<area shape="rect" id="node3" href="classWindSense.html#a3bda1198330c913cadd51eb5bf9652a8" title="Contains all of the parsing functions parseToStruct.cpp." alt="" coords="224,57,437,85"/><area shape="rect" id="node5" href="classWindSense.html#a1d7be6f9e3ed9964a1661df7bf44df9d" title="Update the GPS Data Struct by parsing." alt="" coords="495,5,713,33"/><area shape="rect" id="node7" href="classWindSense.html#aef8efeb056b1f79b42fed46c00ed991a" title="Update the Wind Data Struct by Parsing." alt="" coords="489,57,719,85"/><area shape="rect" id="node9" href="classWindSense.html#aa7fb078bc8798b983103688d83c69f1d" title="Update the Speet Data Struct by Parsing." alt="" coords="486,109,722,137"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a857d644e8150797a2ffc626e8e39e4a2"></a><!-- doxytag: member="WindSense::grabChar" ref="a857d644e8150797a2ffc626e8e39e4a2" args="(char input)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::grabChar </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a character to the partial sentence string. </p>
<p>As long as the string has already started being built, or if a new $ character has been found. There a number of cases in which this can fail and need to be handled.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Requires the external variables, partSentence and partCount </dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Whether or not a complete NMEA sentence has been stored, 0 if it hasn't 1 if it has. </dd></dl>

<p>Definition at line <a class="el" href="WindSense_8cpp_source.html#l00025">25</a> of file <a class="el" href="WindSense_8cpp_source.html">WindSense.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
    <span class="keywordflow">if</span> (<a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a> &gt; 0 || input == <span class="charliteral">&#39;$&#39;</span>) {
        <a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>[<a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a>] = input;
        <a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a>++;
    }

    <span class="keywordflow">if</span> (<a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a> &gt; 3 &amp;&amp; <a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>[<a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a>-3] == <span class="charliteral">&#39;*&#39;</span>) {
        <a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>[<a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a>] = <span class="charliteral">&#39;\0&#39;</span>;
        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3bda1198330c913cadd51eb5bf9652a8"></a><!-- doxytag: member="WindSense::parseInternalNMEA" ref="a3bda1198330c913cadd51eb5bf9652a8" args="(char *input)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::parseInternalNMEA </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Contains all of the parsing functions <a class="el" href="ParseToStruct_8cpp_source.html">parseToStruct.cpp</a>. </p>
<p>Due to the large number of functions used to parse char* instanced into proper types in the structs declared in the header file, this has been created.</p>
<p>It simply contains all of the functions to update the values in the structs.</p>
<p>Created on: 2011-11-14 Author: allgood38 </p>

<p>Definition at line <a class="el" href="ParseToStruct_8cpp_source.html#l00016">16</a> of file <a class="el" href="ParseToStruct_8cpp_source.html">ParseToStruct.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                            {

    <span class="keywordflow">if</span> (strcmp(input,<span class="stringliteral">&quot;GPGLL&quot;</span>) == 0) {
        <span class="comment">//  updateGPS_GPGLL</span>
        <a class="code" href="classWindSense.html#a1d7be6f9e3ed9964a1661df7bf44df9d" title="Update the GPS Data Struct by parsing.">updateGPS_GPGLL</a>();
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(input, <span class="stringliteral">&quot;WIMWV&quot;</span>) == 0) {
        <span class="comment">// Update Something else</span>
        <a class="code" href="classWindSense.html#aef8efeb056b1f79b42fed46c00ed991a" title="Update the Wind Data Struct by Parsing.">updateWIND_WIMWV</a>();
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(input, <span class="stringliteral">&quot;GPVTG&quot;</span>) == 0) {
        <a class="code" href="classWindSense.html#aa7fb078bc8798b983103688d83c69f1d" title="Update the Speet Data Struct by Parsing.">updateSPEED_GPVTG</a>();
    } <span class="keywordflow">else</span> {
        <span class="comment">// TODO Handle parse without valid</span>
        <span class="comment">// NMEA label</span>
    }

    <span class="keywordflow">return</span> 1;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classWindSense_a3bda1198330c913cadd51eb5bf9652a8_cgraph.png" border="0" usemap="#classWindSense_a3bda1198330c913cadd51eb5bf9652a8_cgraph" alt=""/></div>
<map name="classWindSense_a3bda1198330c913cadd51eb5bf9652a8_cgraph" id="classWindSense_a3bda1198330c913cadd51eb5bf9652a8_cgraph">
<area shape="rect" id="node3" href="classWindSense.html#a1d7be6f9e3ed9964a1661df7bf44df9d" title="Update the GPS Data Struct by parsing." alt="" coords="276,5,494,33"/><area shape="rect" id="node5" href="classWindSense.html#aef8efeb056b1f79b42fed46c00ed991a" title="Update the Wind Data Struct by Parsing." alt="" coords="271,57,500,85"/><area shape="rect" id="node7" href="classWindSense.html#aa7fb078bc8798b983103688d83c69f1d" title="Update the Speet Data Struct by Parsing." alt="" coords="267,109,504,137"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1f5f29fd81c464d38de6703f48f1ae6f"></a><!-- doxytag: member="WindSense::splitNMEA" ref="a1f5f29fd81c464d38de6703f48f1ae6f" args="(char *input)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::splitNMEA </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns an array of strings (char arrays) containing parsed values. </p>
<p>This function relies on three different strings. Each string is just an array of characters, so each string needs an index variables to keep track of our progress within the string.</p>
<p>The first string is simply the valid input sentence. The stringArray is to store all the values from the input string. The newValue string is a temporary buffer to hold on to a new value before it is stored in the string array.</p>
<p>The loop will place each input character into the new value string until a comma or asterisk is encountered. Then it stores it to the array of strings, resets the newValue and increments the index for stringArray.</p>
<p>If there is a situation where there are two commas, indicating a null value from the NMEA sentence, a null character will be stored in the string array, rather than just skipping over it. </p>

<p>Definition at line <a class="el" href="WindSense_8cpp_source.html#l00097">97</a> of file <a class="el" href="WindSense_8cpp_source.html">WindSense.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
    <span class="keywordtype">int</span> inputIdx = 1;

    <span class="keywordtype">char</span> newValue[15];
    <span class="keywordtype">int</span> newValueIdx = 0;

    <span class="comment">// For an explanation of the conditions of this loop, see the pdf</span>
    <span class="comment">// documentation.</span>
    <span class="keywordflow">while</span>(inputIdx &lt;= 1 || input[inputIdx - 1] != <span class="charliteral">&#39;*&#39;</span>) {

        <span class="keywordflow">if</span> (input[inputIdx] == <span class="charliteral">&#39;,&#39;</span> || input[inputIdx] == <span class="charliteral">&#39;*&#39;</span>) {
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; newValueIdx; i++) {
                <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[<a class="code" href="classWindSense.html#ad6ffa36b5ca5732a6ac9b0247dd193be" title="index for the array of strings">stringArrayIdx</a>][i] = newValue[i];
            }

            <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[<a class="code" href="classWindSense.html#ad6ffa36b5ca5732a6ac9b0247dd193be" title="index for the array of strings">stringArrayIdx</a>++][newValueIdx] = <span class="charliteral">&#39;\0&#39;</span>;
            newValueIdx=0;

            <span class="comment">// No comma, then store the value in the newValue array</span>
        } <span class="keywordflow">else</span> {
            newValue[newValueIdx++] = input[inputIdx];
            newValue[newValueIdx] = <span class="charliteral">&#39;\0&#39;</span>;
        }

        <span class="comment">// Move to the next character in the input string</span>
        inputIdx++;
    }

    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1d7be6f9e3ed9964a1661df7bf44df9d"></a><!-- doxytag: member="WindSense::updateGPS_GPGLL" ref="a1d7be6f9e3ed9964a1661df7bf44df9d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::updateGPS_GPGLL </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the GPS Data Struct by parsing. </p>
<p>Given that the format of the latitude and longitude are given in a form which exceeds the accuracy of our Arduino, we need to break it into minutes and degrees into separate integers.</p>
<p>[GPS_GPGLL] All data fields </p>

<p>Definition at line <a class="el" href="ParseToStruct_8cpp_source.html#l00043">43</a> of file <a class="el" href="ParseToStruct_8cpp_source.html">ParseToStruct.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                               {
    <span class="keywordtype">char</span>* pEnd;
    <span class="keywordtype">char</span> minutes[10];
    <span class="keywordtype">char</span> degrees[10];

    <span class="comment">/* The AIRMAR Actually reports invalid data, check it</span>
<span class="comment">     * here and abort with 0 if invalid, not doing this</span>
<span class="comment">     * will definitely crash the for loops</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[6][0] == <span class="charliteral">&#39;V&#39;</span>) {
        <span class="keywordflow">return</span> 0;
    }

    <span class="comment">// Since there will be parsing, an index will be used</span>
    <span class="keywordtype">int</span> idx = 0;

    <span class="comment">/* The following two loops parse the latitude, uses</span>
<span class="comment">     * the period as a separator between the minutes</span>
<span class="comment">     * and degrees</span>
<span class="comment">     */</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[1][idx] != <span class="charliteral">&#39;.&#39;</span>; i++) {
        minutes[i] = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[1][idx++];
        <span class="comment">// Always keeping a null at the end</span>
        minutes[i+1] = <span class="charliteral">&#39;\0&#39;</span>;
    }
    <span class="comment">// Skip the period</span>
    idx++;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[1][idx] != <span class="charliteral">&#39;\0&#39;</span>; i++) {
        degrees[i] = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[1][idx++];
        degrees[i+1] = <span class="charliteral">&#39;\0&#39;</span>;
    }

    <span class="comment">// Extract int from the isolated strings</span>
    GPS_GPGLL.minuteLatitude = (int)strtol(minutes,&amp;pEnd,10);
    GPS_GPGLL.degreeLatitude = (int)strtol(degrees,&amp;pEnd,10);

    idx=0;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[3][idx] != <span class="charliteral">&#39;.&#39;</span>; i++) {
        minutes[i] = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[3][idx++];
        minutes[i+1] = <span class="charliteral">&#39;\0&#39;</span>;
    }
    idx++;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[3][idx] != <span class="charliteral">&#39;\0&#39;</span>; i++) {
        degrees[i] = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[3][idx++];
        degrees[i+1] = <span class="charliteral">&#39;\0&#39;</span>;
    }

    GPS_GPGLL.minuteLongitude = (int)strtol(minutes,&amp;pEnd,10);
    GPS_GPGLL.degreeLongitude = (int)strtol(degrees,&amp;pEnd,10);
    
    GPS_GPGLL.latitudeDirection = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[2][0];
    GPS_GPGLL.longitudeDirection = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[4][0];

    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7fb078bc8798b983103688d83c69f1d"></a><!-- doxytag: member="WindSense::updateSPEED_GPVTG" ref="aa7fb078bc8798b983103688d83c69f1d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::updateSPEED_GPVTG </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the Speet Data Struct by Parsing. </p>
<p>Converts strings into the correct types.</p>
<p>[SPEED_GPVTG] All Data Fields </p>

<p>Definition at line <a class="el" href="ParseToStruct_8cpp_source.html#l00126">126</a> of file <a class="el" href="ParseToStruct_8cpp_source.html">ParseToStruct.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
    <span class="comment">// Check if the AIRMAR says the data is valid</span>
    <span class="keywordflow">if</span> (<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[9][0] == <span class="charliteral">&#39;N&#39;</span>) {
        <span class="keywordflow">return</span> 0;
    }
    
    SPEED_GPVTG.courseoverGround      = strtod(<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[1], <span class="charliteral">&#39;\0&#39;</span>);
    SPEED_GPVTG.unitCourseMeasurement = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[2][0];
    SPEED_GPVTG.speedoverGround       = strtod(<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[5], <span class="charliteral">&#39;\0&#39;</span>);
    SPEED_GPVTG.speedUnits            = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[6][0];
    
    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef8efeb056b1f79b42fed46c00ed991a"></a><!-- doxytag: member="WindSense::updateWIND_WIMWV" ref="aef8efeb056b1f79b42fed46c00ed991a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::updateWIND_WIMWV </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the Wind Data Struct by Parsing. </p>
<p>Simply converts the strings into the correct types.</p>
<p>[WIND_WIMWV] All Data Fields </p>

<p>Definition at line <a class="el" href="ParseToStruct_8cpp_source.html#l00105">105</a> of file <a class="el" href="ParseToStruct_8cpp_source.html">ParseToStruct.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                {
    <span class="comment">// Check if the AIRMAR says the data is valid</span>
    <span class="keywordflow">if</span> (<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[5][0] == <span class="charliteral">&#39;V&#39;</span>) {
        <span class="keywordflow">return</span> 0;
    }

    WIND_WIMWV.windAngle      = strtod(<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[1],<span class="charliteral">&#39;\0&#39;</span>);
    WIND_WIMWV.reference      = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[2][0];
    WIND_WIMWV.windSpeed      = strtod(<a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[3],<span class="charliteral">&#39;\0&#39;</span>);
    WIND_WIMWV.windSpeedUnits = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[4][0];
    WIND_WIMWV.valid          = <a class="code" href="classWindSense.html#afd05c14e6eae93432dbc0bc66737563d" title="Array of strings for splitNMEA.">stringArray</a>[5][0];

    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc6881989101175595efce5f59587ac9"></a><!-- doxytag: member="WindSense::validateNMEA" ref="abc6881989101175595efce5f59587ac9" args="(char *input)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WindSense::validateNMEA </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the checksum matches at the end. </p>
<p>Note this function assumes that $ will always be the first character, and that the entire NMEA sentence is untouched and isolated. It also requires that partcount not be reset, since it uses it to determine the end of the sentence</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Requires the external variables, partSentence and partCount </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>The complete and isolated NMEA sentence as a  array </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The checksum is valid, 1 is True, 0 is False. </dd></dl>

<p>Definition at line <a class="el" href="WindSense_8cpp_source.html#l00050">50</a> of file <a class="el" href="WindSense_8cpp_source.html">WindSense.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                       {
    <span class="keywordtype">int</span> calculatedChecksum = 0;
    <span class="keywordtype">char</span> rawGivenChecksum[2];
    <span class="keywordtype">int</span> givenChecksum = 0;

    <span class="comment">// XOR every element between [1] and *</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; <a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>[i] != <span class="charliteral">&#39;*&#39;</span>; i++) {
        calculatedChecksum ^= <a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>[i];
    }

    <span class="comment">// Convert the last two characters into a hexadecimal number</span>
    rawGivenChecksum[0] = <a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>[<a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a>-2];
    rawGivenChecksum[1] = <a class="code" href="classWindSense.html#abe7bbd7724c280892c4bcff6df5e456d" title="buffer for incoming NMEA for grabChar function">partSentence</a>[<a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a>-1];

    <span class="keywordtype">char</span>* parserChar;
    givenChecksum = (int)strtol(rawGivenChecksum, &amp;parserChar, 16);

    <span class="comment">// Another possible method</span>
    <span class="comment">//sscanf(rawGivenChecksum, &quot;%x&quot;, &amp;givenChecksum);</span>

    <a class="code" href="classWindSense.html#a061e7abee51944d5a264dda2a889c3be" title="index for partSentence">partCount</a> = 0;
    <span class="keywordflow">return</span> (givenChecksum == calculatedChecksum);
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="WindSense_8h_source.html">WindSense.h</a></li>
<li><a class="el" href="AIRMARSpecific_8cpp_source.html">AIRMARSpecific.cpp</a></li>
<li><a class="el" href="ParseToStruct_8cpp_source.html">ParseToStruct.cpp</a></li>
<li><a class="el" href="WindSense_8cpp_source.html">WindSense.cpp</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 16 2011 13:25:30 for NEWMAST by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
